<script src="/authproxy/login/bower_components/jquery/dist/jquery.min.js"></script>
<script src="/authproxy/login/bower_components/js-cookie/src/js.cookie.js"/></script>

<script>
	var authTokenCookieName = 'AuthProxyToken';
	
	function usernameField() {
		return $('#username');
	}

	function passwordField() {
		return $('#password');
	}

	function loginField() {
		return $('#login');
	}

	$(document).ready(function() {
		loginField().click(login);

		usernameField().on('input', updateLoginFieldState);
		passwordField().on('input', updateLoginFieldState);
		updateLoginFieldState();
	});

	function updateLoginFieldState() {
		if (usernameField().val() && passwordField().val()) {
			loginField().removeAttr('disabled');
		} else {
			loginField().attr('disabled', 'disabled');
		}
	}

	function login() {
		var username = usernameField().val();
		var password = passwordField().val();

		console.log('username: ' + username);
		console.log('password: ' + password);

		// Make a login request.
		$.post('/authproxy/dologin/', {
			username : usernameField().val(),
			password : passwordField().val()
		}).done(function(token) {
			console.log('token');
			console.log(token);
		}).fail(function() {
			console.log('failed');
		});
	}

	// function setAuthToken() {
	// 	Cookies.set(authTokenCookieName, 'something');	
	// }

	// function clearAuthToken() {
	// 	Cookies.remove(authTokenCookieName);
	// }
</script>

<body>
	Login page!

	<input id="username" type="text" placeholder="Username">
	<input id="password" type="password" placeholder="Password">
	<input id="login" type="button" value="Login">
</body>

